          const crops = JSON.parse(jsonStr) as MarketItem[];
          
          return crops.map((crop: MarketItem) => ({
            ...crop,
            id: crop.id || crop.name.toLowerCase().replace(/\s+/g, '-'),
            avg: Number(crop.avg) || 0,
            min: Number(crop.min) || 0,
            max: Number(crop.max) || 0,
            current: Math.round((Number(crop.avg) || 0) + (Math.random() * 100 - 50)),
            history: generateHistory(Number(crop.avg) || 0)
          }));
        }
      }
      console.log("AI Market Data Failed or Empty, using fallback");
      return fallbackCrops;
    } catch (error) {
      console.error("Error fetching market prices:", error);
      return fallbackCrops;
    }
  },
});
