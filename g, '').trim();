          const crops = JSON.parse(jsonStr) as MarketItem[];
          
          return crops.map((crop: MarketItem) => {
            // Ensure ID exists, fallback to lowercase name if missing
            const id = crop.id || crop.name.split(' ')[0].toLowerCase();
            const history = generateHistory(crop.avg);
            return {
              ...crop,
              id,
              history
            };
          });
        }
      }
      return fallbackCrops;
    } catch (error) {
      console.error("Error fetching market prices:", error);
      return fallbackCrops;
    }
  },
});
